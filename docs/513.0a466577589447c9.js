"use strict";(self.webpackChunkDashBoard=self.webpackChunkDashBoard||[]).push([[513],{3513:(_,l,i)=>{i.r(l),i.d(l,{SettingComponent:()=>b});var m=i(6814),u=i(8784),a=i(95),e=i(4769),p=i(9862);let h=(()=>{class s{constructor(t){this._HttpClient=t}updateUserData(t){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/users/updateMe/",t)}addAddress(t){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/addresses",t)}getAddresss(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/addresses")}removeAddress(t){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/addresses/${t}`)}updataPass(t){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/users/changeMyPassword",t)}static#e=this.\u0275fac=function(n){return new(n||s)(e.LFG(p.eN))};static#t=this.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function g(s,o){1&s&&(e.TgZ(0,"p",20),e._uU(1," Name Updated ! "),e.qZA())}function c(s,o){if(1&s&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.mailUpdated," ")}}function f(s,o){if(1&s&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.addressUpdated," ")}}function I(s,o){if(1&s&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.ageUpdated," ")}}function U(s,o){if(1&s&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.numberUpdated," ")}}let b=(()=>{class s{constructor(t,n){this._UserService=t,this._FormBuilder=n,this.photo="./assets/images/user.jpg",this.selectedFile=null,this.message="",this.userName="",this.userEmail="",this.usernumber="01111111111",this.userPhone="Add Your Number",this.userAdress=[],this.userAdres="Add Your Adress",this.userId="",this.userAge="Add Your Age",this.nameUpdated=!1,this.mailUpdated="",this.ageUpdated="",this.numberUpdated="",this.addressUpdated="",this.updateName=new a.cw({name:new a.NI("",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(20)])}),this.registerForm=new a.cw({name:new a.NI("",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(20)]),email:new a.NI("",[a.kI.required,a.kI.email]),phone:new a.NI("",[a.kI.required,a.kI.pattern(/^01[0125][0-9]{8}$/)])}),this.address=new a.cw({details:new a.NI("",[a.kI.minLength(10),a.kI.maxLength(40),a.kI.required])}),this.age=new a.cw({input:new a.NI("",[a.kI.pattern(/^(1[0-9]|2[0-9]|[3-5][0-9]|60)$/)])}),this.number=new a.cw({phone:new a.NI("",[a.kI.pattern(/^(1[0-9]|2[0-9]|[3-5][0-9]|60)$/)])})}ngOnInit(){if(localStorage.getItem("eToken")){let t=localStorage.getItem("eToken"),n=(0,u.o)(t);this.Dataaa=n,this.userId=this.Dataaa.id,console.log(this.Dataaa.name),this.userName=localStorage.getItem(`${this.userId} name `),this.userEmail=localStorage.getItem("mail")}this.userName=this.Dataaa.name,this.userEmail=localStorage.getItem("mail"),localStorage.getItem(`${this.userId} name `)&&(this.userName=localStorage.getItem(`${this.userId} name `)),localStorage.getItem(`${this.userId} address `)&&(this.userAdres=localStorage.getItem(`${this.userId} address `)),localStorage.getItem(`${this.userId} age `)&&(this.userAge=localStorage.getItem(`${this.userId} age `)),localStorage.getItem(`${this.userId} phone `)&&(this.userPhone=localStorage.getItem(`${this.userId} phone `)),this.photo=localStorage.getItem(this.Dataaa.id)?localStorage.getItem(this.Dataaa.id):"./assets/images/user.jpg"}changeName(){const t=document.getElementById("name");this.userName=t.value,console.log(this.userName),localStorage.setItem(`${this.userId} name `,this.userName),t.value="",this.nameUpdated=!0}updateEmail(){this.mailUpdated="",this._UserService.updateUserData({name:this.userName,email:this.registerForm.value.email,phone:this.usernumber}).subscribe({next:n=>{const r=document.getElementById("mail");this.userName=n.user.name,this.userEmail=n.user.email,this.mailUpdated=n.message,console.log(n),localStorage.setItem("mail",this.userEmail),r.value=""},error:n=>{this.mailUpdated=n.error.errors.msg,console.log(n)}})}addAddress(){this.addressUpdated="",this._UserService.addAddress({name:this.userName,details:this.address.value.details,phone:this.usernumber,city:"cairo"}).subscribe({next:n=>{this.address.reset(),this.userAdress=n.data,this.addressUpdated=n.message,console.log(n),localStorage.setItem(`${this.userId} address `,this.getLastElement(this.userAdress).details),this.userAdres=localStorage.getItem(`${this.userId} address `)}})}getLastElement(t){return 0===t.length?"Add your Address":t[t.length-1]}addAge(){const t=document.getElementById("age");this.ageUpdated="",this.age.invalid?this.ageUpdated="Valid Age 10 to 60":(this.userAge=t.value,localStorage.setItem(`${this.userId} age `,this.userAge),this.ageUpdated="Updated",t.value="")}addnumber(){const t=document.getElementById("phone");this.numberUpdated="",this.number.invalid?this.numberUpdated="Enter a valid number":(this.userPhone=t.value,localStorage.setItem(`${this.userId} phone `,this.userPhone),this.numberUpdated="Updated",t.value="")}static#e=this.\u0275fac=function(n){return new(n||s)(e.Y36(h),e.Y36(a.qu))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-setting"]],standalone:!0,features:[e.jDz],decls:46,vars:17,consts:[[1,"bg-gray-300","dark:bg-[#15191d]","min-h-[95vh]","dark:text-white"],[1,"container","mx-auto","flex"],[1,"flex","flex-col","pt-5","w-[30%]"],[1,"font-bold","md:text-[40px]"],[3,"formGroup","ngSubmit"],["for","name",1,"font-bold"],["formControlName","name","type","text","id","name",1,"input","placeholder:text-slate-600","font-bold","placeholder:font-light",3,"placeholder"],["class","font-bold text-slate-500 py-2 dark:text-white",4,"ngIf"],[1,"btn-set",3,"disabled"],[1,"pt-6"],["for","mail",1,"font-bold"],["formControlName","email","type","text","id","mail",1,"input","placeholder:text-slate-600","font-bold","placeholder:font-light",3,"placeholder"],[1,"btn-set"],["for","details",1,"font-bold"],["formControlName","details","type","text","id","details",1,"input","placeholder:text-slate-600","font-bold","placeholder:font-light",3,"placeholder"],["for","age",1,"font-bold"],["formControlName","input","type","tel","id","age",1,"input","placeholder:text-slate-600","font-bold","placeholder:font-light",3,"placeholder"],["for","phone",1,"font-bold"],["formControlName","input","type","tel","id","phone",1,"input","placeholder:text-slate-600","font-bold","placeholder:font-light",3,"placeholder"],[1,"w-[50%]"],[1,"font-bold","text-slate-500","py-2","dark:text-white"]],template:function(n,r){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),e._uU(5,"Personal Information"),e.qZA(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return r.changeName()}),e.TgZ(7,"label",5),e._uU(8,"Name : "),e.qZA(),e._UZ(9,"input",6),e.YNc(10,g,2,0,"p",7),e.TgZ(11,"button",8),e._uU(12," Update "),e.qZA()()(),e.TgZ(13,"div",9)(14,"form",4),e.NdJ("ngSubmit",function(){return r.updateEmail()}),e.TgZ(15,"label",10),e._uU(16,"Eamil : "),e.qZA(),e._UZ(17,"input",11),e.YNc(18,c,2,1,"p",7),e.TgZ(19,"button",12),e._uU(20,"Update"),e.qZA()()(),e.TgZ(21,"div",9)(22,"form",4),e.NdJ("ngSubmit",function(){return r.addAddress()}),e.TgZ(23,"label",13),e._uU(24,"Address : "),e.qZA(),e._UZ(25,"input",14),e.YNc(26,f,2,1,"p",7),e.TgZ(27,"button",8),e._uU(28,"Update"),e.qZA()()(),e.TgZ(29,"div",9)(30,"form",4),e.NdJ("ngSubmit",function(){return r.addAge()}),e.TgZ(31,"label",15),e._uU(32,"Age : "),e.qZA(),e._UZ(33,"input",16),e.YNc(34,I,2,1,"p",7),e.TgZ(35,"button",12),e._uU(36,"Update"),e.qZA()()(),e.TgZ(37,"div",9)(38,"form",4),e.NdJ("ngSubmit",function(){return r.addnumber()}),e.TgZ(39,"label",17),e._uU(40,"Phone : "),e.qZA(),e._UZ(41,"input",18),e.YNc(42,U,2,1,"p",7),e.TgZ(43,"button",12),e._uU(44,"Update"),e.qZA()()()(),e._UZ(45,"div",19),e.qZA()()),2&n&&(e.xp6(6),e.Q6J("formGroup",r.updateName),e.xp6(3),e.Q6J("placeholder",r.userName),e.xp6(1),e.Q6J("ngIf",r.nameUpdated),e.xp6(1),e.Q6J("disabled",r.updateName.invalid),e.xp6(3),e.Q6J("formGroup",r.registerForm),e.xp6(3),e.Q6J("placeholder",r.userEmail),e.xp6(1),e.Q6J("ngIf",r.mailUpdated),e.xp6(4),e.Q6J("formGroup",r.address),e.xp6(3),e.Q6J("placeholder",r.userAdres),e.xp6(1),e.Q6J("ngIf",r.addressUpdated),e.xp6(1),e.Q6J("disabled",r.address.invalid),e.xp6(3),e.Q6J("formGroup",r.age),e.xp6(3),e.Q6J("placeholder",r.userAge),e.xp6(1),e.Q6J("ngIf",r.ageUpdated),e.xp6(4),e.Q6J("formGroup",r.number),e.xp6(3),e.Q6J("placeholder",r.userPhone),e.xp6(1),e.Q6J("ngIf",r.numberUpdated))},dependencies:[m.ez,m.O5,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]})}return s})()}}]);