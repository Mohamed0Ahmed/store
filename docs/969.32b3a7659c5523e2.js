"use strict";(self.webpackChunkDashBoard=self.webpackChunkDashBoard||[]).push([[969],{1969:(f,h,s)=>{s.r(h),s.d(h,{CheckoutComponent:()=>k});var _=s(6814),o=s(95),t=s(4769),g=s(1120),l=s(7422);function C(n,m){1&n&&(t.TgZ(0,"div",18)(1,"p",8),t._uU(2,"Details is required"),t.qZA()())}function r(n,m){1&n&&(t.TgZ(0,"p",8),t._uU(1," Phone is required "),t.qZA())}function u(n,m){1&n&&(t.TgZ(0,"p",8),t._uU(1," Invalid Number "),t.qZA())}function v(n,m){if(1&n&&(t.TgZ(0,"div",18),t.YNc(1,r,2,0,"p",19),t.YNc(2,u,2,0,"p",19),t.qZA()),2&n){const i=t.oxw();let c,e;t.xp6(1),t.Q6J("ngIf",null==(c=i.checkOut.get("phone"))?null:c.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(e=i.checkOut.get("phone"))?null:e.getError("pattern"))}}function O(n,m){1&n&&(t.TgZ(0,"div",18)(1,"p",8),t._uU(2,"City is required"),t.qZA()())}let k=(()=>{class n{constructor(i,c,e){this._FormBuilder=i,this._ActivatedRoute=c,this._CartService=e,this.cartId="",this.userData={},this.checkOut=this._FormBuilder.group({details:["",o.kI.required],phone:["",[o.kI.required,o.kI.pattern(/^01[0125][0-9]{8}$/)]],city:["",o.kI.required]})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:i=>{console.log(i.get("id")),this.cartId=i.get("id")}})}handleForm(){console.log(this.checkOut.value),this.userData=this.checkOut.value,this._CartService.checkOut(this.cartId,this.userData).subscribe({next:i=>{console.log(i),"success"==i.status&&window.open(i.session.url,"_self")}})}static#t=this.\u0275fac=function(c){return new(c||n)(t.Y36(o.qu),t.Y36(g.gz),t.Y36(l.N))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-checkout"]],standalone:!0,features:[t.jDz],decls:27,vars:5,consts:[[1,"lg:container","mx-auto"],[1,"flex","flex-col","lg:flex-row","items-center","justify-center","lg:min-h-[90vh]"],[1,"p-5"],["src","./assets/images/online.png","alt","online"],[1,"shadow-lg","shadow-slate-700","p-5","rounded-lg","dark:shadow-none"],[1,"text-center","md:py-12"],[1,"font-extrabold","text-slate-800","dark:text-slate-200","md:text-[30px]"],[1,"dark:text-white","font-bold","text-slate-950",3,"formGroup","ngSubmit"],[1,""],["for","details"],["type","text","id","details","formControlName","details",1,"input"],["class","text-slate-500 dark:text-white text-[12px] text-center",4,"ngIf"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"input"],["for","city"],["type","text","id","city","formControlName","city",1,"input"],[1,"text-center","pt-5"],[1,"btn-set",3,"disabled"],[1,"text-slate-500","dark:text-white","text-[12px]","text-center"],["class","",4,"ngIf"]],template:function(c,e){if(1&c&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"h2",6),t._uU(7," Information About Delivery "),t.qZA()(),t.TgZ(8,"form",7),t.NdJ("ngSubmit",function(){return e.handleForm()}),t.TgZ(9,"div",8)(10,"label",9),t._uU(11,"Notes To Deliver"),t.qZA(),t._UZ(12,"input",10),t.qZA(),t.YNc(13,C,3,0,"div",11),t.TgZ(14,"div",8)(15,"label",12),t._uU(16,"Number To Contact"),t.qZA(),t._UZ(17,"input",13),t.qZA(),t.YNc(18,v,3,2,"div",11),t.TgZ(19,"div",8)(20,"label",14),t._uU(21,"Address To Deliver"),t.qZA(),t._UZ(22,"input",15),t.qZA(),t.YNc(23,O,3,0,"div",11),t.TgZ(24,"div",16)(25,"button",17),t._uU(26,"Submit"),t.qZA()()()()()()),2&c){let a,p,d;t.xp6(8),t.Q6J("formGroup",e.checkOut),t.xp6(5),t.Q6J("ngIf",((null==(a=e.checkOut.get("details"))?null:a.touched)||""!=(null==(a=e.checkOut.get("details"))?null:a.value))&&(null==(a=e.checkOut.get("details"))?null:a.errors)),t.xp6(5),t.Q6J("ngIf",((null==(p=e.checkOut.get("phone"))?null:p.touched)||""!=(null==(p=e.checkOut.get("phone"))?null:p.value))&&(null==(p=e.checkOut.get("phone"))?null:p.errors)),t.xp6(5),t.Q6J("ngIf",((null==(d=e.checkOut.get("city"))?null:d.touched)||""!=(null==(d=e.checkOut.get("city"))?null:d.value))&&(null==(d=e.checkOut.get("city"))?null:d.errors)),t.xp6(2),t.Q6J("disabled",e.checkOut.invalid)}},dependencies:[_.ez,_.O5,o.UX,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return n})()},7422:(f,h,s)=>{s.d(h,{N:()=>g});var _=s(5619),o=s(4769),t=s(9862);let g=(()=>{class l{constructor(r){this._HttpClient=r,this.cartNubmer=new _.X(0)}addToCart(r){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:r})}getUserCart(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart")}removeItem(r){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${r}`)}updateCount(r,u){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${r}`,{count:u})}clearCart(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart/")}checkOut(r,u){const v=encodeURIComponent("http://localhost:4200/#");return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${r}?url=${v}`,{shippingAddress:u})}cash(r,u){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/${r}`,{shippingAddress:u})}getUserOrders(r){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${r}`)}static#t=this.\u0275fac=function(u){return new(u||l)(o.LFG(t.eN))};static#e=this.\u0275prov=o.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()}}]);